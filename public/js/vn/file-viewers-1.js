/* V1 * Author(s): Angelos Barmpoutis * * Copyright (c) 2016, University of Florida Research Foundation, Inc. * All rights reserved. * * Redistribution and use in source and binary forms, with or without * modification, are permitted provided that the following conditions are * met: * * * Redistributions of source code must retain this copyright * notice, this list of conditions and the following disclaimer. * * Redistributions in binary form must reproduce this * copyright notice, this list of conditions and the following disclaimer * in the documentation and/or other materials provided with the * distribution. * * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS * "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE. */ function AbstractFileViewer(cloud_object) { this.div_container=document.createElement('div'); vn.set(this.div_container.style,{position:'absolute',top:'0px',left:'0px',right:'0px',bottom:'0px',overflow:'scroll'}); } AbstractFileViewer.prototype.getDiv=function(){return this.div_container;}; function FileViewerField(div,name,value) { var color1='#AAFFAA'; var color2='#2a8e6a'; if(name.startsWith('VN_')) { color1='#FFAAAA'; color2='#8e2a6a'; }	this.div=document.createElement('div'); vn.set(this.div.style,{position: 'relative', padding: '2px 3px', backgroundColor: color1, display: 'inline-block', borderRadius: '14px', boxShadow: 'inset 0 3px 2px rgba(255,255,255,.22), inset 0 -3px 2px rgba(0,0,0,.17), inset 0 20px 10px rgba(255,255,255,.12), 0 0 4px 1px rgba(0,0,0,.1), 0 3px 2px rgba(0,0,0,.2)'}); this.name_div=document.createElement('div'); vn.set(this.name_div.style,{position: 'relative', marginLeft: '5px', fontWeight: '700', width: 'auto', display: 'inline-block', color: color2, fontFamily: 'Arial', fontSize: '14px', textDecoration: 'none', textShadow: '0px 1px 0px #f1fdf1'}); this.name_div.innerHTML=name; this.div.appendChild(this.name_div); this.value_div=document.createElement('div'); vn.set(this.value_div.style,{position: 'relative', display: 'inline-block', backgroundColor: '#FFFFFF', marginLeft: '5px', borderRadius: '10px', padding: '5px 8px 2px 8px', color: '#333', boxShadow: 'inset 0 2px 0 rgba(0,0,0,.2), 0 0 4px rgba(0,0,0,0.1)'}); this.value_div.innerHTML=value; this.div.appendChild(this.value_div); div.appendChild(this.div); } function DefaultFileViewer(cloud_object) { AbstractFileViewer.call(this,cloud_object); var fields=cloud_object.getFields(); this.title_div=document.createElement('div'); vn.set(this.title_div.style,{width:'100%',height:'50px',overflow:'hidden'}); this.div_container.appendChild(this.title_div); this.title_icon_div=document.createElement('div'); vn.set(this.title_icon_div.style,{position:'absolute',left:'5px',top:'5px',width:'40px',height:'40px',overflow:'hidden',backgroundSize:'contain',backgroundImage:'url("'+vn.hosturl+'js/img/file-icon.png")'}); if(fields.VN_CLASS=='List' || fields.VN_CLASS=='Root') this.title_icon_div.style.backgroundImage='url("'+vn.hosturl+'js/img/folder-closed-icon.png")'; else if(fields.VN_CLASS=='Trash') this.title_icon_div.style.backgroundImage='url("'+vn.hosturl+'js/img/trash-full-icon.png")'; this.title_div.appendChild(this.title_icon_div); this.title_text_div=document.createElement('div'); vn.set(this.title_text_div.style,{position:'absolute',left:'50px',height:'50px',fontSize:'50px',fontFamily:'Arial',lineHeight:'50px'}); this.title_text_div.innerHTML=fields.VN_NAME; this.title_div.appendChild(this.title_text_div); this.fields_div=document.createElement('div'); vn.set(this.fields_div.style,{width:'100%' }); this.div_container.appendChild(this.fields_div); for(field in fields) { new FileViewerField(this.div_container,field,fields[field]); } } vn.extend(AbstractFileViewer,DefaultFileViewer); function UserFileViewer(cloud_object) { AbstractFileViewer.call(this,cloud_object); var fields=cloud_object.getFields(); var o=vn.cloud.getObject(fields.VN_CREATOR); var self=this; o.whenReady().then(function() { self.div_container.innerHTML=''+o.info.first_name+' '+o.info.last_name; }); } vn.extend(AbstractFileViewer,UserFileViewer); function ListFileViewer(cloud_object) { AbstractFileViewer.call(this,cloud_object); var fields=cloud_object.getFields(); this.title_div=document.createElement('div'); vn.set(this.title_div.style,{width:'100%',height:'50px',overflow:'hidden'}); this.div_container.appendChild(this.title_div); this.title_icon_div=document.createElement('div'); vn.set(this.title_icon_div.style,{position:'absolute',left:'5px',top:'5px',width:'40px',height:'40px',overflow:'hidden',backgroundSize:'contain',backgroundImage:'url("'+vn.hosturl+'js/img/folder-closed-icon.png")'}); if(fields.VN_CLASS=='Trash') this.title_icon_div.style.backgroundImage='url("'+vn.hosturl+'js/img/trash-full-icon.png")'; this.title_div.appendChild(this.title_icon_div); this.title_text_div=document.createElement('div'); vn.set(this.title_text_div.style,{position:'absolute',left:'50px',height:'50px',fontSize:'50px',fontFamily:'Arial',lineHeight:'50px'}); this.title_text_div.innerHTML=fields.VN_NAME; this.title_div.appendChild(this.title_text_div); } vn.extend(AbstractFileViewer,ListFileViewer);
